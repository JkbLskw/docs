---
title: Frontend
description: How to setup and write frontend tests in TypeScript.
order: 10
---
:lit:

// tag::content[]
= Testing the frontend of a Hilla application

There are several tools are that recommended for writing unit tests in TypeScript. https://karma-runner.github.io[Karma] is good for running tests. Use https://vitejs.dev[Vite] for building tests to run in the browser.

For writing tests, there's https://mochajs.org[Mocha]. For creating assertions, use https://www.chaijs.com[Chai]. You can use https://sinonjs.org[Sinon] for creating spies and mocks. And https://modern-web.dev/docs/test-runner/writing-tests/helper-libraries[OpenWC Testing library] is useful to simplify testing.

== Preparations

Before writing and running tests, you will need to install some basic packages and necessary plugins. This setup assumes that you already have `Vite` installed and configured. Run the following from the command-line:

.Terminal
[source,bash]
----
npm install --save-dev karma karma-coverage karma-mocha karma-vite mocha @types/mocha sinon @types/sinon chai-dom @types/chai-dom sinon-chai @types/sinon-chai
----

Additionally, you have to install browser launchers. You can do that by executing the following from the command-line:

.Terminal
[source,bash]
----
npm install --save-dev karma-chrome-launcher karma-firefox-launcher karma-safarinative-launcher
----
ifdef::lit[]
For Lit, it is also recommended to install Open WC library with testing helpers.
It provides useful tools for testing web components.

.terminal
[source,terminal]
----
npm install --save-dev @open-wc/testing-helpers
----
endif::lit[]
ifdef::react[]
For React, we recommend that you install the React Testing Library. It contains useful tools for testing react components. To install it, execute the following:

.Terminal
[source,bash]
----
npm install --save-dev @testing-library/react
----
endif::react[]

Create `karma.config.js`, or `karma.config.cjs` if you use ESM. Note that Karma does not yet support EMS.

[.example]
--
.Terminal
[source,bash]
----
<source-info group="Unix"></source-info>
touch karma.config.js
----

.Terminal
[source,bash]
----
<source-info group="Windows"></source-info>
echo "" > karma.config.js
----
--

.Karma configuration is written in JavaScript
[NOTE]
For converting from TypeScript to JavaScript, Karma uses internally `ts-node` -- it doesn't allow you to change this. Since it could cause various issues, we recommend not using it.


== Configuration

[source,javascript]
----
include::{root}/src/main/resources/hilla/testing/frontend/karma.config.js[]
----
<1> The `karma-safarinative-launcher` plugin works better with Safari after version 12, rather than the original `karma-safari-launcher`.
<2> If in the CI environment, some unnecessary options can be omitted to speed up the testing, slightly.
<3> In case you need to run tests in watch mode.
<4> Option to collect test coverage.
<5> For Chrome, it's better to launch without a sandbox in the CI environment.
<6> For coverage, we use a combination of karma-vite and karma-coverage. They have the built-in integration.
<7> Generates human-readable code coverage as HTML. Since it's unnecessary in the CI environment, we can drop it.
<8> Generates machine-readable code coverage that could be used in various coverage collector tools like Codecov or Sonarcloud. You could also use the https://cobertura.github.io/cobertura/[Cobertura] format to display coverage in https://www.jenkins.io/[Jenkins].

To customize Karma configuration, please read the https://karma-runner.github.io/6.4/config/configuration-file.html[Karma documentation].

To run tests, add the following scripts to the `package.json` file.

.`package.json`
[source,json]
----
{
  "scripts": {
    "test": "karma start karma.config.cjs",
    "test:watch": "npm run test -- --watch",
    "test:coverage": "npm run test -- --coverage"
  }
}
----


== Test suites

ifdef::lit[]
Consider a single web component `Foo` in the file `frontend/components/foo.ts`.

[source,typescript]
----
include::{root}/src/main/resources/hilla/testing/frontend/lit/foo.ts[tags=snippet,indent=0]
----

To add the first test, create a file in the `test` directory using the `mkdir` command like so:

[.example]
--
.Terminal
[source,bash]
----
<source-info group="Unix"></source-info>
mkdir -p frontend/test && touch $_/foo.test.ts
----

.Terminal
[source,bash]
----
<source-info group="Windows"></source-info>
mkdir frontend\test; echo nul > frontend\test\foo.test.ts
----
--

Now you can add some tests for the `Foo` component like this:

[source,typescript]
----
include::{root}/src/main/resources/hilla/testing/frontend/lit/foo.test.ts[tags=snippet,indent=0]
----

endif::lit[]
ifdef::react[]
Consider a single React component in the file `frontend/components/foo.tsx`.

[source,typescript]
----
include::{root}/src/main/resources/hilla/testing/frontend/react/foo.tsx[tags=snippet,indent=0]
----

To add the first test, create a file in the `test` directory using the `mkdir` command like so:

[.example]
--
.Terminal
[source,bash]
----
<source-info group="Unix"></source-info>
mkdir -p frontend/test && touch $_/foo.test.tsx
----

.Terminal
[source,bash]
----
<source-info group="Windows"></source-info>
mkdir frontend\test; echo nul > frontend\test\foo.test.tsx
----
--

Now you can add some tests for the `Foo` component like this:

[source,typescript]
----
include::{root}/src/main/resources/hilla/testing/frontend/react/foo.test.tsx[tags=snippet,indent=0]
----

endif::react[]
// end::content[]
